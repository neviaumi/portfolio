# CMS Backend Selection

## Context and Problem Statement

When building my portfolio site, I want the content to be managed by a block-based CMS instead of being hardcoded into
the site so I can change the content easily.

Because the portfolio site would contain a lot of content, using local JSON to manage content would be difficult.

Ideally, it would have a system that supports persistence over JSON files, and I can just commit the JSON file into
GitHub.

## Decision Drivers

- Ability to run locally
- Ability to commit content to GitHub
- Ability to access content through API (a.k.a Headless CMS)
- Valuable showcase for other job opportunities that require the CMS

## Considered Options

- Contentful
- WordPress
- PayloadCMS
- TinaCMS
- Decapcms

## Decision Outcome

I picked TinaCMS as my CMS backend because it provides first-class support for saving content over files instead of a
database. It also provides API access to the content.

### Positive Consequences

- I can edit content by just starting the server and rebuilding.
- All the content is visible on GitHub preview.

### Negative Consequences <!-- optional -->

- In order to keep the visual editing feature working, I have to use the autogenerated client. It makes the
  configuration complex.

## Pros and Cons of the Options <!-- optional -->

### Contentful

- Good, because data is managed through the cloud.
- Good, because it is feature-rich.
- Bad, because it requires payment to access all features.
- Bad, because it requires extra effort to handle authentication.
- … <!-- numbers of pros and cons can vary -->

### WordPress

[Example implementation of custom content type on WP](https://github.com/neviaumi/portfolio/blob/556a7aabbb1e978cab26c6767dee30d3b34528ad/systems/cms/wordpress/wp-content/plugins/portfolio/portfolio.php#L1)

That implementation includes setting up a custom content type and incorporating the custom fields within the content
type. It also exposes the custom content type content on the REST API.

That experimental implementation is nearly all I want for this portfolio project.

- Good, because it is a popular CMS (62.2% as written).
- Good, because there are millions of results on the Internet for troubleshooting.
- Bad, because the implementation is complicated, as it requires a lot of custom code to implement just a custom content
  type.
- Bad, because it is not a headless CMS natively. That means I have to write a lot of custom code in plugins to expose
  the custom content type, including the form on the admin and public-facing API.

### PayloadCMS

- Good, because it is fairly popular.
- Good, because it is headless and lightweight.
- Bad, because file persistence isn't supported by default.

### TinaCMS

[Example repo](https://github.com/neviaumi/portfolio/tree/be3f34007ed319d0c0be571fec760c40881360dc/systems/cms)

That implementation contains custom models.

- Good, because it is dead simple to implement custom models.
- Good, because it is tailor-made for SSG CMS. All the content is saved over local files.
- Good, it provides visual editing features. I could edit on the production site directly.
- Bad, the visual editing feature requires extra configuration to get it to work, and it would couple the frontend and
  CMS.

### Decapcms

- Bad, the documentation was badly written. I attempted to follow the official document to set it up. I couldn't even
  log in to the admin.
- Bad, all content types are managed in a single config file. It becomes a pain to manage when the number of content
  types scales.

## Links <!-- optional -->

- [Contentful](https://www.contentful.com/)
- [WordPress market share](https://w3techs.com/technologies/overview/content_management)

<!-- example: Refined by [ADR-0005](0005-example.md) -->

- … <!-- numbers of links can vary -->
